project:
  key: "multi-agent-chatbot"  # Your LaunchDarkly project key
  environment:
    - key: production
  
  # Combined geographic + business tier segments (4 total)
  segment:
    - key: eu-free
      rules:
      - attribute: "country"
        op: "in"
        values: ["DE", "FR", "ES", "IT", "NL", "BE", "AT", "PL", "PT", "GR", "CZ", "HU", "SE", "DK", "FI"]
        contextKind: "user"
        negate: false
      - attribute: "plan"
        op: "in"
        values: ["free", "trial", "basic", "starter"]
        contextKind: "user"
        negate: false
    
    - key: eu-paid
      rules:
      - attribute: "country"
        op: "in"
        values: ["DE", "FR", "ES", "IT", "NL", "BE", "AT", "PL", "PT", "GR", "CZ", "HU", "SE", "DK", "FI"]
        contextKind: "user"
        negate: false
      - attribute: "plan"
        op: "in"
        values: ["paid", "premium", "pro", "professional", "enterprise", "business", "corporate"]
        contextKind: "user"
        negate: false
        
    - key: other-free
      rules:
      - attribute: "country"
        op: "not_in"
        values: ["DE", "FR", "ES", "IT", "NL", "BE", "AT", "PL", "PT", "GR", "CZ", "HU", "SE", "DK", "FI"]
        contextKind: "user"
        negate: false
      - attribute: "plan"
        op: "in"
        values: ["free", "trial", "basic", "starter"]
        contextKind: "user"
        negate: false
        
    - key: other-paid
      rules:
      - attribute: "country"
        op: "not_in"
        values: ["DE", "FR", "ES", "IT", "NL", "BE", "AT", "PL", "PT", "GR", "CZ", "HU", "SE", "DK", "FI"]
        contextKind: "user"
        negate: false
      - attribute: "plan"
        op: "in"
        values: ["paid", "premium", "pro", "professional", "enterprise", "business", "corporate"]
        contextKind: "user"
        negate: false

  # Multi-agent AI configurations
  # Tool definitions - CLI creates these programmatically  
  tool:
    - key: "search_v1"
      name: "Basic Keyword Search"
      description: "Simple keyword search through knowledge base"
      type: "function"
      
    - key: "arxiv_search"
      name: "ArXiv Academic Search"
      description: "Search academic papers from ArXiv database"
      type: "mcp"
      server: "arxiv-mcp-server"
      
    - key: "semantic_scholar"
      name: "Semantic Scholar Research"
      description: "Access Semantic Scholar citation database"
      type: "mcp"
      server: "semanticscholar-MCP-Server"

  ai_config:
    # Supervisor agent for workflow orchestration
    - key: "supervisor-agent"
      name: "Supervisor Agent - Workflow Orchestration"
      variations:
        - key: "supervisor-basic-v2"
          modelConfig:
            provider: "anthropic"
            modelId: "claude-3-5-sonnet-20241022"
          instructions: "You are an AI supervisor that coordinates between security and support agents. Route requests efficiently based on content analysis. Choose next action: 'security_agent' for PII removal or compliance, 'support_agent' for research and information, 'complete' when workflow is finished. Respond with ONLY the agent name."
          customParameters:
            max_tool_calls: 5
            temperature: 0.3
      targeting:
        rules: []
        defaultVariation: "supervisor-basic"

    # Security agent for PII detection with geographic privacy compliance
    - key: "security-agent"
      name: "Security Agent - PII Detection"
      variations:
        - key: "basic-security"
          modelConfig:
            provider: "anthropic"
            modelId: "claude-3-5-haiku-20241022"
          instructions: "You are a privacy agent that detects and redacts sensitive PII but allows names and general personal information. Redact: emails, phone numbers, addresses, SSN, credit cards, financial info. Keep: names, general locations, job titles. Return JSON with detected (boolean), types (array), redacted (text with PII replaced by [REDACTED])."
          customParameters:
            temperature: 0.1
            max_tool_calls: 1
        - key: "strict-security"  
          modelConfig:
            provider: "anthropic"
            modelId: "claude-3-5-haiku-20241022"
          instructions: "You are a strict privacy agent for EU GDPR compliance that REMOVES ALL PII. Redact everything personally identifiable: names, emails, phones, addresses, locations, job titles, companies, dates of birth. Return JSON with detected (boolean), types (array), redacted (text with ALL PII replaced by [REDACTED])."
          customParameters:
            temperature: 0.1
            max_tool_calls: 1
      targeting:
        rules:
          - segments: ["eu-free"]
            variation: "strict-security"
          - segments: ["eu-paid"]
            variation: "strict-security"
        defaultVariation: "basic-security"

    # Support agent with 4 combined geographic + business tier variations
    - key: "support-agent"
      name: "Support Agent"
      variations:
        # EU variations
        - key: "eu-free"
          modelConfig:
            provider: "anthropic"
            modelId: "claude-3-5-haiku-20241022"
          tools: ["search_v1"]
          instructions: "You are a helpful assistant with access to basic search (search_v1). Use your search tool to find relevant information from the knowledge base while following EU privacy requirements. Always search before responding to ensure accuracy."
          customParameters:
            max_tool_calls: 3
            temperature: 0.4
            max_cost_per_session: 0.10
            privacy_mode: "strict"
            
        - key: "eu-paid"
          modelConfig:
            provider: "anthropic"
            modelId: "claude-3-5-sonnet-20241022"
          tools: ["search_v1", "search_v2", "reranking", "arxiv_search", "semantic_scholar"]
          instructions: "You are a premium research specialist with access to comprehensive RAG tools: search_v1 (basic search), search_v2 (semantic vector search), reranking (BM25 relevance scoring), arxiv_search (academic papers), and semantic_scholar (citation database). When search results are available, prioritize information from those results over your general knowledge. EU privacy laws require strict data handling. Always cite sources and explain confidence levels. Use multiple search approaches for complex queries."
          customParameters:
            max_tool_calls: 20
            temperature: 0.1
            max_cost_per_session: 10.00
            privacy_mode: "strict"
            
        # Other (Non-EU) variations
        - key: "other-free"
          modelConfig:
            provider: "openai"
            modelId: "gpt-4o-mini"
          tools: ["search_v1"]
          instructions: "You are a helpful assistant with access to basic search (search_v1). Use your search tool to find relevant information from the knowledge base. Provide accurate, concise responses efficiently."
          customParameters:
            max_tool_calls: 3
            temperature: 0.5
            max_cost_per_session: 0.10
            privacy_mode: "standard"
            
        - key: "other-paid"
          modelConfig:
            provider: "openai"
            modelId: "gpt-4o"
          tools: ["search_v1", "search_v2", "reranking", "arxiv_search", "semantic_scholar"]
          instructions: "You are a premium research specialist with access to comprehensive RAG tools: search_v1 (basic search), search_v2 (semantic vector search), reranking (BM25 relevance scoring), arxiv_search (academic papers), and semantic_scholar (citation database). When search results are available, prioritize information from those results over your general knowledge. Provide comprehensive, well-researched responses with source attribution from external databases and academic sources."
          customParameters:
            max_tool_calls: 20
            temperature: 0.2
            max_cost_per_session: 10.00
            privacy_mode: "standard"
            
        # International fallback
        - key: "international-standard"
          modelConfig:
            provider: "anthropic"  # Default to privacy-friendly
            modelId: "claude-3-5-haiku-20241022"
          tools: ["search_v1", "search_v2", "reranking"]
          instructions: "You are a helpful assistant with access to RAG tools: search_v1 (basic search), search_v2 (semantic vector search), and reranking (BM25 relevance scoring). When search results are available, prioritize information from those results over your general knowledge. Provide balanced, well-researched responses for international users."
          customParameters:
            max_tool_calls: 5
            temperature: 0.4
            max_cost_per_session: 0.50

        # Simple 1:1 segment-to-variation mapping
      targeting:
        rules:
          - segments: ["eu-free"]
            variation: "eu-free"
          - segments: ["eu-paid"]
            variation: "eu-paid"
          - segments: ["other-free"]
            variation: "other-free"
          - segments: ["other-paid"]
            variation: "other-paid"
            
        defaultVariation: "international-standard"